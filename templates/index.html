<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Average Saham</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .input-group {
            display: flex;
            margin-bottom: 10px;
        }
        .input-group input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }
        .input-group input:first-child {
            margin-right: 10px;
        }
        button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h2>Kalkulator Average Saham</h2>
    <form method="post">
        <div id="stock-inputs">
            <div class="input-group">
                <input type="number" name="stocks[]" placeholder="Jumlah Saham" step="any">
                <input type="number" name="prices[]" placeholder="Harga Saham" step="any">
            </div>
        </div>
        <button type="button" onclick="addStockInput()">+ Tambah Pembelian</button>
        <button type="submit">Hitung</button>
    </form>

    {% if result is defined %}
    <div class="result">
        <h4>Hasil:</h4>
        <p>Harga Rata-rata (Average): <strong>Rp {{ "{:,.2f}".format(result) }}</strong></p>
        <p>Total Saham: <strong>{{ total_shares }}</strong></p>
        <p>Total Biaya: <strong>Rp {{ "{:,.2f}".format(total_cost) }}</strong></p>
    </div>
    {% endif %}

    {% if error %}
    <div class="result" style="background-color: #f8d7da; border-color: #f5c6cb;">
        <p style="color: #721c24;">Error: {{ error }}</p>
    </div>
    {% endif %}

    <script>
        function addStockInput() {
            const container = document.getElementById('stock-inputs');
            const newInputs = document.createElement('div');
            newInputs.className = 'input-group';
            newInputs.innerHTML = `
                <input type="number" name="stocks[]" placeholder="Jumlah Saham" step="any">
                <input type="number" name="prices[]" placeholder="Harga Saham" step="any">
            `;
            container.appendChild(newInputs);
        }
    </script>
</body>
</html>
